# Internationalisation Workflow

Zen Haven uses a simple yet robust runtime internationalisation (i18n) system. This document explains how to add new translations and extend support for additional languages.

## Locale files

All translations live under the `locales/` directory at the project root. Each file is a JSON object whose shape mirrors the component and route tree. For example:

```json
{
  "app": {
    "name": "Zen Haven"
  },
  "pages": {
    "home": {
      "title": "Home - Zen Haven",
      "description": "Welcome to Zen Haven, your full‑service web agency."
    },
    "services": {
      "title": "Services - Zen Haven",
      "description": "Discover the comprehensive services we offer."
    }
  },
  "components": {
    "header": {
      "services": "Services",
      "pricing": "Pricing"
    }
  }
}
```

When you need to display a new piece of text, choose a unique key that reflects its location in the UI. For example, a button in the footer might use `components.footer.newsletter.submit`. Add that key to every locale file with the appropriate translation.

### Adding a new language

1. Copy `locales/en.json` to a new file with the ISO 639‑1 code (e.g. `nl.json` for Dutch).
2. Translate every value in the new file. If a key is missing in a language the app will fall back to English and log a warning in development.
3. Register the new language code by extending the `Locale` union in `client/i18n/index.tsx` and updating the `<option>` list in the header language selector.

## Runtime API

The `I18nProvider` provides a `t(key)` function and exposes the current language and a setter:

```tsx
import { useTranslation } from '@/i18n';

const { t, lang, setLang } = useTranslation();
t('components.header.pricing'); // => "Pricing" (in current locale)
```

### Pluralisation & Formatting

For pluralisation and date/number formatting you should use JavaScript's built‑in `Intl` APIs. These respect the current locale automatically:

```tsx
const { lang } = useTranslation();
const formatter = new Intl.NumberFormat(lang, { style: 'currency', currency: 'EUR' });
formatter.format(1234.56); // "€1,234.56" in en, "1.234,56 €" in fr
```

Use `Intl.PluralRules` to decide between plural forms when necessary.

## Missing keys

If `t` cannot find a key in the selected language, it falls back to the English value and logs a warning in development. Missing keys return the key name in production to avoid blank text.

## Changing the language

The header includes a language selector. Choosing a language updates the context and saves the preference in `localStorage`. The `<html lang="…">` attribute is also kept in sync to aid screen readers.
